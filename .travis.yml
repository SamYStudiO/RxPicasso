language: android

jdk:
  - oraclejdk8

before_install:
  - mkdir "$ANDROID_HOME/licenses" || true
  - echo "d56f5187479451eabf01fb78af6dfcb131a6481e" > "$ANDROID_HOME/licenses/android-sdk-license"

script:
  - ./gradlew clean check

after_success:
  - .buildscript/deploy_snapshot.sh

env:
  global:
  - secure: CIS1GaRjnmR3EjhkC0fMrt4wIX7UPIrhJeUOE2qKKxV4BI2mh5akU6ZG26cjma88J3V4PoIvlUvLgzF0Q2PM5BnTs8ohY1Gyvov33twrO6rNE+mJbGlEoMmFvoxMty6FqO9beohjKKnbecfcu71pEkNmy/70nEVtlfQb5QvUAcl+sEP+pRmPd9kN6BZidvyD2qflDqI0VAiwDBxGCBmXBnxHIsTi50qVDMuBHmgR6GHKO0YMfVdJm1V0AM7Y+97sCszx2bBHMqKgI47CZokbUE7yLOGDfGXS19qOtxKY88sM0uDJ5/EVxYjltO4gGkWFtBJvv252Oepas/IES9YORNSTQ/rXYL6g4UMxRpcSEXUjbl7qQAe8X4OhQearAeGvMHG56rI+0ZOcd4hOx7sPqYKZzyhaeInhJzvQ+kJcB0GQ578TkYvRbJeaTH5639uH7zimV9gsZ8YkLfdTGAxePDANx3nKjpt5YDvblbuIW/n7D1cWZObFUkd6qpNrWq/9mg/pKb09VM5FCZtMOlkZoP7B2ngJjOjmC722hYjE8NLoF517qO9KVlM0J3bWTp/kDouEAXbyPW3Ww0lZpywsXC78Qt3i8HwK3yVVjKEZB5amiTq3erDapS+uXB5e6PKwW7LxaxvrYbKt5X8Tg9Oa+pJ5Ga7S1T3/hjzWeypeuCY=
  - secure: prON8xFSOMCpc7eodSyg6o0dl9mayjLm0i6wEGv/Bb9EEJOQmJpI/+xMrVfZCKeJz+mHGwGQXBLJn4GoKUl1KdR53awfL5uX8dH3YVdpTgWZk6EtaZpFYlGrFyHDALPeARxybhg1QoYXseK937qetbEVuHF4lOKvxkqwmkJPSeHMjps0DjanRDzglGMh7WpbUW4w8ltwcxZLnhHVKDMxE8OuSBX1kdbWDXRLKF16CE+8xhANlWDJJ5QcwdG0iAITOP2Kisjy+NUHJHOD1Bc7gL44L6BJfJTkGQ6LEK4QQfBLqZp4liGJLw9gFkkH0N1KLu266RTtZHSINIx8MVT2fWRigNip7UiblTM+unGqB940oNmv3uGxZEu3FPTJK0UtXEzihttkgc9NP0yZHHYKngwWNzMTQDPHN7x6FN3sqUlErtkXw6OqXitnRAq4rxb2lVuzSNQGy4f60/bEKAmNF4NhQ6QZS/q2B3SRUoGM2ogfDL7CicKH36nhIlbuqCFqXbztH6zzbIjvF8WYrcocjkbEkpDMYBlrECNfmuPfPYKohrybALCKT84WqiLp0hMeROi6Dn4KTSNPK40kduwBvb+AbTkO3G7Wh7FpX/PhijOO2ZtNqEDR4ojvzMLQ8EMRj+eeyQFjsjyQ0wZrkhPUUNBS6WRVZVFnl7Fqx2c4sTQ=

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $HOME/.android/build-cache

sudo: false